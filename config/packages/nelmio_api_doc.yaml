nelmio_api_doc:
  documentation:
    openapi: 3.0.0
    info:
      title: Ham  Tajrobe
      version: '1'
      description: A place to share awesome experiences
    components:
      securitySchemes:
        jwt:
          type: http
          description: JWT authentication token
          scheme: bearer
          bearerFormat: JWT
    security:
    - jwt: []
    tags:
    - name: Auth
      description: End-points to authenticate user and provide refresh token.
    - name: Admin
      description: End-points which are just accessible to the admin user.
    - name: Host
      description: End-points which are just accessible to host users.
    - name: Experiencer
      description: End-points which are just accessible to experiencer users.
    paths:
      /api/v1/auth/login:
        post:
          tags:
          - Auth
          summary: Login end-point
          security: []
          description: 'Login a user by the given credentials. It returns a `token`
            and a `refresh_token`.

            '
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  required:
                  - phoneNumber
                  - password
                  properties:
                    phoneNumber:
                      type: string
                      description: Phone number is the unique dentifier of the use.
                    password:
                      type: string
                      description: User's password.
                    role:
                      type: string
                      description: The role to be logged in with.
                  example:
                    phoneNumber: '9121234567'
                    password: pass_1234
                    role: role_experiencer
          responses:
            '200':
              description: User authenticated successfuly.
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      status:
                        type: string
                        description: Result of the action
                      data:
                        type: object
                        description: Date payload returned from the server.
                        properties:
                          id:
                            type: integer
                            description: Id of the created user.
                          token:
                            type: string
                            description: JWT to be used while working with application.
                          refresh_token:
                            type: string
                            description: The refresh token to get new JWT if it expired.
                      message:
                        type: string
                        description: A message describing result of the action.
                    example:
                      status: success
                      data:
                        id: 1
                        token: a jwt token
                        refresh_token: a refresh token
                      message: User authenticated successfully.
            '400':
              description: A required parameter is missing or a variable format is
                wrong.
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      status:
                        type: string
                        description: Result of the action
                      details:
                        type: object
                        description: Details of the validation errors on fields.
                        properties:
                          fieldName:
                            type: array
                            description: List of validation errors on this field
                            items:
                              type: string
                      message:
                        type: string
                        description: A discription about failure.
                    example:
                      status: failed
                      details: null
                      message: The key "password" is required.
            '401':
              description: User provided invalid credentials.
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      status:
                        type: string
                        description: Result of the action
                      message:
                        type: string
                        description: A discription about failure.
                    example:
                      status: failed
                      message: Invalid Credentials.
      /api/v1/orders/{order_id}/checkout:
        get:
          tags:
          - Experiencer
          summary: Order checkout
          security:
          - jwt: []
          description: 'If the order is purchasable redirect experiencer to bank page.

            '
          parameters:
          - name: order-id
            required: true
            in: path
            description: 'The id of the order to be purchased.

              '
            schema:
              type: integer
          responses:
            '303':
              description: Experiencer is redirected to bank page.
            '400':
              description: The user is trying to purchase a wrong order
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      status:
                        type: string
                        description: Result of the action.
                      details:
                        type: array
                        items:
                          type: string
                        description: List of validation errors on this field
                      message:
                        type: string
                        description: Description about what happened.
                    example:
                      status: failed
                      messaage: The order id(order-id) is not purchasable.
      /api/v1/admin/categories:
        post:
          tags:
          - Admin
          summary: Admin creates a new category
          security:
          - jwt: []
          description: 'Using this end point admin creates a new category.

            '
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  required:
                  - name
                  properties:
                    name:
                      type: string
                      description: Name of the new category
                  example:
                    name: Skydiving
          responses:
            '200':
              description: Admin created a new category
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      status:
                        type: string
                        description: Result of the action
                      data:
                        type: object
                        description: Information about the created category.
                        properties:
                          id:
                            type: integer
                            description: Unique id of the created category.
                      message:
                        type: string
                        description: A message describing result of the action.
                    example:
                      status: success
                      data:
                        id: 10
                      message: category successfully created
            '400':
              description: User provided wrong input.
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      status:
                        type: string
                        description: Result of the action
                      details:
                        type: object
                        description: Details of the validation errors on fields.
                        properties:
                          fieldName:
                            type: array
                            description: List of validation errors on this field
                            items:
                              type: string
                      message:
                        type: string
                        description: A discription about failure.
                    example:
                      status: failed
                      details:
                        name:
                        - This field should not be blank.
                      message: Validation error.
            '403':
              description: The user has not sufficient permission to access this end
                point.
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      status:
                        type: string
                        description: Result of the action
                      message:
                        type: string
                        description: A discription about failure.
                    example:
                      status: failed
                      message: AUTHORIZATION FAILED.
        get:
          tags:
          - Admin
          summary: Admin gets all categories
          security:
          - jwt: []
          description: 'This end-point is accessible to admin and returns all registered
            categories.

            '
          responses:
            '200':
              description: List of all categories
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      status:
                        type: string
                        description: Result of the action
                      data:
                        type: array
                        description: List of all experiences' categories.
                        items:
                          type: object
                          properties:
                            id:
                              type: integer
                              description: Index of category.
                            name:
                              type: string
                              description: Name of the category.
                      message:
                        type: string
                        description: A message describing result of the action.
                    example:
                      status: success
                      data:
                      - id: 1
                        name: Painting
                      - id: 2
                        name: Caligraphy
                      message: successfully retrieve all categories
            '403':
              description: The user has not sufficient permission to access this end
                point.
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      status:
                        type: string
                        description: Result of the action
                      message:
                        type: string
                        description: A discription about failure.
                    example:
                      status: failed
                      message: AUTHORIZATION FAILED.
      /api/v1/admin/categories/{category_id}:
        delete:
          tags:
          - Admin
          summary: Admin deletes a category
          security:
          - jwt: []
          description: 'This end-point is accessible to admin and delete a registered
            categories.

            '
          parameters:
          - name: category_id
            required: true
            in: path
            description: 'The id of the category to be deleted.

              '
            schema:
              type: integer
          responses:
            '200':
              description: A category just deleted.
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      status:
                        type: string
                        description: Result of the action
                      data:
                        type: array
                        items: {}
                      message:
                        type: string
                        description: A message describing result of the action.
                    example:
                      status: success
                      data: null
                      message: category successfully deleted
            '400':
              description: The requested category does not exist.
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      status:
                        type: string
                        description: Result of the action
                      details:
                        type: object
                        description: Details of the validation errors on fields.
                        properties:
                          fieldName:
                            type: array
                            description: List of validation errors on this field
                            items:
                              type: string
                      message:
                        type: string
                        description: A discription about failure.
                    example:
                      status: failed
                      details: null
                      message: Object not found
            '403':
              description: The user has not sufficient permission to access this end
                point.
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      status:
                        type: string
                        description: Result of the action
                      message:
                        type: string
                        description: A discription about failure.
                    example:
                      status: failed
                      message: AUTHORIZATION FAILED.
        patch:
          tags:
          - Admin
          summary: Admin updates a category
          security:
          - jwt: []
          description: 'This end-point is accessible to admin and update a categories.

            '
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  required:
                  - name
                  properties:
                    name:
                      type: string
                      description: Name of the category to be updated.
                  example:
                    name: Skydiving
          parameters:
          - name: category_id
            required: true
            in: path
            description: 'The id of the category to be updated.

              '
            schema:
              type: integer
          responses:
            '200':
              description: The category updated.
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      status:
                        type: string
                        description: Result of the action
                      data:
                        type: array
                        description: List of all experiences' categories.
                        items:
                          type: string
                      message:
                        type: string
                        description: A message describing result of the action.
                    example:
                      status: success
                      data: null
                      message: category successfully deleted
            '400':
              description: The requested category does not exist.
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      status:
                        type: string
                        description: Result of the action
                      details:
                        type: object
                        description: Details of the validation errors on fields.
                        properties:
                          fieldName:
                            type: array
                            description: List of validation errors on this field
                            items:
                              type: string
                      message:
                        type: string
                        description: A discription about failure.
                    example:
                      status: failed
                      details: null
                      message: Object not found
            '403':
              description: The user has not sufficient permission to access this end
                point.
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      status:
                        type: string
                        description: Result of the action
                      message:
                        type: string
                        description: A discription about failure.
                    example:
                      status: failed
                      message: AUTHORIZATION FAILED.
      /api/v1/host/experiences:
        post:
          tags:
          - Host
          summary: Host creates a new experience
          security:
          - jwt: []
          description: 'Using this end point host creates a new experience.

            '
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  required:
                  - title
                  - categoryName
                  - description
                  properties:
                    title:
                      type: string
                      description: Title of the new experience
                    categoryName:
                      type: string
                      description: Category of the new experience
                    description:
                      type: string
                      description: Description of the new experience
                  example:
                    title: Skydiving
                    categoryName: Sport
                    description: In this experince you feel how it is like to be free.
          responses:
            '200':
              description: Host created a new experience.
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      status:
                        type: string
                        description: Result of the action
                      data:
                        type: object
                        description: Information about the created experience.
                        properties:
                          id:
                            type: integer
                            description: Unique id of the created experience.
                      message:
                        type: string
                        description: A message describing result of the action.
                    example:
                      status: success
                      data:
                        id: 10
                      message: Experience successfully created
            '400':
              description: User provided wrong input.
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      status:
                        type: string
                        description: Result of the action
                      details:
                        type: object
                        description: Details of the validation errors on fields.
                        properties:
                          fieldName:
                            type: array
                            description: List of validation errors on this field
                            items:
                              type: string
                      message:
                        type: string
                        description: A discription about failure.
                    example:
                      status: failed
                      details:
                        name:
                        - This field should not be blank.
                      message: Validation error.
            '403':
              description: The user has not sufficient permission to access this end
                point.
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      status:
                        type: string
                        description: Result of the action
                      message:
                        type: string
                        description: A discription about failure.
                    example:
                      status: failed
                      message: AUTHORIZATION FAILED.
            '404':
              description: Host tried to assign a category to the experience which
                does not exist.
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      status:
                        type: string
                        description: Result of the action
                      messaage:
                        type: string
                        description: A discription about failure.
                    example:
                      status: failed
                      message: Category name does not exist.
        get:
          tags:
          - Host
          summary: Host gets all whom experiences.
          security:
          - jwt: []
          description: 'This end-point is accessible to host users to returns all
            registered experiences.

            '
          responses:
            '200':
              description: List of all host experiences
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      status:
                        type: string
                        description: Result of the action
                      data:
                        type: array
                        description: List of all experiences which belong to hosts.
                        items:
                          type: string
                      message:
                        type: string
                        description: A message describing result of the action.
                    example:
                      status: success
                      message: Successfully retrieve all experience
            '403':
              description: The user has not sufficient permission to access this end
                point.
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      status:
                        type: string
                        description: Result of the action
                      message:
                        type: string
                        description: A discription about failure.
                    example:
                      status: failed
                      message: AUTHORIZATION FAILED.
      /api/v1/host/experiences/{experience_id}:
        delete:
          tags:
          - Host
          summary: Host deletes an experience
          security:
          - jwt: []
          description: 'This end-point is accessible to host and deletes whom registered
            expereinces.

            '
          parameters:
          - name: experience_id
            required: true
            in: path
            description: 'The id of the experience to be deleted.

              '
            schema:
              type: integer
          responses:
            '200':
              description: An experience just deleted.
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      status:
                        type: string
                        description: Result of the action
                      data:
                        type: array
                        items: {}
                      message:
                        type: string
                        description: A message describing result of the action.
                    example:
                      status: success
                      data: null
                      message: category successfully deleted
            '400':
              description: The requested experience does not exist.
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      status:
                        type: string
                        description: Result of the action
                      details:
                        type: object
                        description: Details of the validation errors on fields.
                        properties:
                          fieldName:
                            type: array
                            description: List of validation errors on this field
                            items:
                              type: string
                      message:
                        type: string
                        description: A discription about failure.
                    example:
                      status: failed
                      details: null
                      message: Object not found
            '403':
              description: The user has not sufficient permission to access this end
                point.
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      status:
                        type: string
                        description: Result of the action
                      message:
                        type: string
                        description: A discription about failure.
                    example:
                      status: failed
                      message: AUTHORIZATION FAILED.
        patch:
          tags:
          - Host
          summary: Host updates an experience
          security:
          - jwt: []
          description: 'This end-point is accessible to hosts and updates an experience.

            '
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    title:
                      type: string
                      description: Name of the experience to be updated.
                      example: Skydiving
                    description:
                      type: string
                      description: A description about the experience to be updated.
                      example: Feel the life from an upper position.
                    categoryName:
                      type: string
                      description: Updated category for the experience.
                      example: Sport
          parameters:
          - name: experience_id
            required: true
            in: path
            description: 'The id of the experience to be updated.

              '
            schema:
              type: integer
            example: 1
          responses:
            '200':
              description: The category updated.
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      status:
                        type: string
                        description: Result of the action
                        example: success
                      data:
                        type: array
                        items: {}
                        example: []
                      message:
                        type: string
                        description: A message describing result of the action.
                        example: Experience successfully updated
            '400':
              description: User provided wrong input.
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      status:
                        type: string
                        description: Result of the action
                      details:
                        type: object
                        description: Details of the validation errors on fields.
                        properties:
                          fieldName:
                            type: string
                            description: List of validation errors on this field
                      message:
                        type: string
                        description: A discription about failure.
            '403':
              description: The user has not sufficient permission to access this end
                point.
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      status:
                        type: string
                        description: Result of the action
                      message:
                        type: string
                        description: A discription about failure.
                    example:
                      status: failed
                      message: AUTHORIZATION FAILED.
            '404':
              description: Description of the error occurred.
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      status:
                        type: string
                        description: Result of the action
                        example: failed
                      message:
                        type: string
                        description: A discription about failure.
                        example: Category name does not exist.
  areas:
    default:
      path_patterns:
      - ^/api(?!/(doc|v1\/checkoutCallback|v1\/auth\/refresh))
